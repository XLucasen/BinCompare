# 版本更新 v1.7.0

## 发布日期
2025年11月23日

## 版本号
**v1.7.0**

## 编译状态
✅ 成功（0个错误，50个警告）

---

## 主要更新

### 1. 数据编辑功能
- **编辑已选数据** - 右键菜单新增"编辑已选数据"选项
- **编辑窗口** - 弹出式编辑窗口，显示在程序中央
- **十六进制编辑** - 支持修改选中行的十六进制数据
- **连续性检查** - 仅支持单行或连续多行编辑
- **实时验证** - 验证十六进制格式和字节数量

### 2. 文件同步功能
- **同步到文件A** - 将文件B的数据同步到文件A
- **同步到文件B** - 将文件A的数据同步到文件B
- **精确同步** - 仅同步实际选中的行，不同步范围内的其他行
- **自动对比** - 同步后自动重新进行对比

### 3. 文件保存功能
- **保存按钮** - 修改后在文件标题旁显示"保存"、"另存为"、"还原"按钮
- **修改标志** - 自动追踪文件是否被修改
- **保存到原路径** - "保存"按钮保存到原文件
- **另存为** - "另存为"按钮可选择新的保存位置
- **还原功能** - "还原"按钮恢复文件到加载时的原始状态
- **确认对话框** - 还原操作需要用户确认

### 4. 右键菜单扩展
完整的右键菜单功能：
- 复制已选数据
- 复制位置信息
- **编辑已选数据** ✨ 新增
- 同步到文件A/B

### 5. 多行选择支持
- **Shift+点击** - 选择连续范围
- **Ctrl+点击** - 添加/移除单个选择
- **单击** - 单行选择

---

## 新增功能详情

### 编辑已选数据
```
操作流程：
1. 选中一行或连续多行
2. 右键菜单 → "编辑已选数据"
3. 在弹出窗口修改十六进制数据
4. 点击"确认"应用修改或"取消"放弃
5. 文件标题旁显示保存按钮
```

### 文件同步
```
操作流程：
1. 选中要同步的数据行
2. 右键菜单 → "同步到文件A/B"
3. 数据被复制到另一个文件的相同地址
4. 自动重新进行对比
5. 文件标题旁显示保存按钮
```

### 文件保存
```
操作流程：
1. 编辑或同步数据后，修改标志自动设置
2. 文件标题旁显示"保存"、"另存为"、"还原"按钮
3. 点击"保存" → 保存到原文件
4. 点击"另存为" → 选择新位置保存
5. 点击"还原" → 确认后恢复原始状态
```

---

## 文件修改

### 代码文件
- **MainWindow.xaml** - 添加保存按钮UI和转换器
- **MainWindow.xaml.cs** - 实现6个保存/还原事件处理器，编辑和同步功能
- **MainWindowViewModel.cs** - 添加修改状态属性
- **DataEditWindow.xaml** - 新建编辑窗口UI
- **DataEditWindow.xaml.cs** - 新建编辑窗口逻辑

### 配置文件
- **BinCompare.csproj** - 版本号 1.6.1 → 1.7.0

### 帮助文档
- **HelpWindow.xaml** - 更新版本信息、功能列表、使用说明

---

## 核心功能列表（更新）

✓ 双文件对比
✓ 十六进制/二进制显示
✓ ASCII字符显示
✓ 字节级差异高亮
✓ 点击高亮
✓ 可配置行长度
✓ 差异导出
✓ 拖拽打开
✓ 可拖拽分隔线
✓ **数据编辑** ✨ 新增
✓ **文件同步** ✨ 新增
✓ **文件保存** ✨ 新增
✓ **修改还原** ✨ 新增
✓ **多行选择** ✨ 新增

---

## 技术栈
- **语言** - C# 12
- **框架** - WPF (.NET 8.0)
- **架构** - MVVM
- **UI框架** - HandyControls 3.6.0

---

## 已知限制
- 编辑功能仅支持连续行或单行选择
- 修改未保存前关闭程序会丢失数据
- 大文件编辑时性能可能受影响

---

## 下一步计划
- 撤销/重做功能
- 批量编辑功能
- 搜索和替换功能
- 差异对齐显示

---

## 版本历史

| 版本 | 日期 | 主要功能 |
|------|------|---------|
| v1.7.0 | 2025-11-23 | 数据编辑、文件同步、文件保存/还原 |
| v1.6.1 | 2025-11-22 | 拖拽文件到程序图标加载 |
| v1.6.0 | 2025-11-22 | 字节级差异高亮、点击高亮 |
| v1.5.3 | 2025-11-22 | 帮助窗口 |
| v1.5.2 | 2025-11-22 | ASCII选中状态颜色 |
| v1.5.1 | 2025-11-22 | HandyControls框架 |
| v1.5.0 | 2025-11-21 | ASCII字符显示 |
| v1.4.0 | 2025-11-21 | 隐藏/显示差异信息 |
| v1.3.0 | 2025-11-21 | 可拖拽分隔线 |
| v1.2.0 | 2025-11-21 | 界面重新设计 |
| v1.1.0 | 2025-11-21 | 拖拽文件功能 |
| v1.0.0 | 2025-11-21 | 初始版本 |

---

## 编译和运行

### 编译
```bash
dotnet build
```

### 运行
```bash
dotnet run
```

### 发布
```bash
dotnet publish -c Release -r win-x64
```

---

## 反馈和支持
- 作者：Lucas
- 邮箱：332555220@qq.com
- 网址：https://0554h.com
